{"ast":null,"code":"// import React, { useEffect, useState } from \"react\";\n// import { useParams } from \"react-router-dom\";\n// import axios from \"axios\";\n// import moment from \"moment\"; // import moment library\n// import Button from \"react-bootstrap/esm/Button\";\n// import Loader from \"../components/Loader\";\n// import Error from \"../components/Error\";\n\n// function Bookingscreen({ match }) {\n//   const { roomid, fromdate, todate } = useParams();\n\n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(false);\n//   const [room, setrooms] = useState(true);\n\n//   const firstdate = moment(fromdate , 'YYYY-MM-DD')\n//   const lastdate = moment(todate , 'YYYY-MM-DD')\n//   const totaldays = moment.duration(lastdate.diff(firstdate)).asDays()+1\n\n//   // const totalamount = (totaldays*room.rentperday);\n//   const [totalamount, settotalamount] = useState(0)\n\n//   useEffect(() => {\n//     const fetchRoom = async () => {\n//       try {\n//         setLoading(true);\n//         const response = await axios.post(\"/api/rooms/getroombyid\", { roomid });\n//         console.log(response);\n//         settotalamount(response.data.rentperday*totaldays)\n//         setrooms(response.data);\n//         setLoading(false);\n//       } catch (error) {\n//         setLoading(false);\n//         setError(true);\n//       }\n//     };\n//     fetchRoom();\n//   }, [roomid]);\n\n//   async function bookRoom(){\n//     const currentUser = JSON.parse(localStorage.getItem('currentUser'));\n//     if (!currentUser) {\n//       // Handle the case where currentUser is null or undefined\n//       return;\n//     }\n//     console.log('currentUser:', currentUser);\n\n//     const bookingDetails ={\n//       room ,\n//       userid: currentUser._id,\n//       fromdate,\n//       todate,\n//       totalamount,\n//       totaldays\n//     }\n//     try {\n//       const result =await axios.post('/api/bookings/bookroom', bookingDetails)\n//     } catch (error) {\n//       // handle error\n//     }\n//   }\n//     return (\n//     <div className=\"m-5\">\n//       {loading ? (\n//         <Loader/>\n//       ) : room ? (\n//         <div>\n//           <div className=\"row justify-content-center mt-5 bs bg-white\">\n//             <div className=\"col-md-6\">\n//               <h1>{room?.name}</h1>\n//               {room?.imageurls && room?.imageurls.length > 0 && (\n//                 <img src={room.imageurls[0]} className=\"big-img\" />\n//               )}\n//             </div>\n//             <div className=\"col-md-6\">\n//               <div style={{ textAlign: \"right\" }}>\n//                 <h1>Booking Details </h1>\n//                 <hr />\n//                 <b>\n//                   <p>Name :</p>\n\n//                   <p>From Date : {fromdate}</p>\n//                   <p>To Date : {todate}</p>\n//                   <p>Max Count : {room.maxcount}</p>\n//                 </b>\n//               </div>\n\n//               <div style={{ textAlign: \"right\" }}>\n//                 <b>\n//                   <h1>Amount </h1>\n//                   <hr />\n//                   <p>Total Days : {totaldays}</p>\n//                   <p>Rent per day : {room.rentperday}</p>\n//                   <p>Total Amount : {totalamount} </p>\n//                 </b>\n//               </div>\n\n//               <div style={{ float: \"right\" }}>\n//                 <button className=\"btn btn-primary\" onClick={bookRoom}>Pay Now </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       ) : (\n//         <Error /> // add error component\n//       )}\n//     </div>\n//   );\n// }\n\n// export default Bookingscreen;","map":{"version":3,"names":[],"sources":["C:/Users/duash/Downloads/hotel booking system/hotel booking system/client/src/screens/Bookingscreen.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\n// import { useParams } from \"react-router-dom\";\n// import axios from \"axios\";\n// import moment from \"moment\"; // import moment library\n// import Button from \"react-bootstrap/esm/Button\";\n// import Loader from \"../components/Loader\";\n// import Error from \"../components/Error\";\n\n// function Bookingscreen({ match }) {\n//   const { roomid, fromdate, todate } = useParams();\n  \n//   const [loading, setLoading] = useState(true);\n//   const [error, setError] = useState(false);\n//   const [room, setrooms] = useState(true);\n\n//   const firstdate = moment(fromdate , 'YYYY-MM-DD')\n//   const lastdate = moment(todate , 'YYYY-MM-DD')\n//   const totaldays = moment.duration(lastdate.diff(firstdate)).asDays()+1\n\n//   // const totalamount = (totaldays*room.rentperday);\n//   const [totalamount, settotalamount] = useState(0)\n\n\n\n\n//   useEffect(() => {\n//     const fetchRoom = async () => {\n//       try {\n//         setLoading(true);\n//         const response = await axios.post(\"/api/rooms/getroombyid\", { roomid });\n//         console.log(response);\n//         settotalamount(response.data.rentperday*totaldays)\n//         setrooms(response.data);\n//         setLoading(false);\n//       } catch (error) {\n//         setLoading(false);\n//         setError(true);\n//       }\n//     };\n//     fetchRoom();\n//   }, [roomid]);\n\n\n\n//   async function bookRoom(){\n//     const currentUser = JSON.parse(localStorage.getItem('currentUser'));\n//     if (!currentUser) {\n//       // Handle the case where currentUser is null or undefined\n//       return;\n//     }\n//     console.log('currentUser:', currentUser);\n      \n//     const bookingDetails ={\n//       room ,\n//       userid: currentUser._id,\n//       fromdate,\n//       todate,\n//       totalamount,\n//       totaldays\n//     }\n//     try {\n//       const result =await axios.post('/api/bookings/bookroom', bookingDetails)\n//     } catch (error) {\n//       // handle error\n//     }\n//   }\n//     return (\n//     <div className=\"m-5\">\n//       {loading ? (\n//         <Loader/>\n//       ) : room ? (\n//         <div>\n//           <div className=\"row justify-content-center mt-5 bs bg-white\">\n//             <div className=\"col-md-6\">\n//               <h1>{room?.name}</h1>\n//               {room?.imageurls && room?.imageurls.length > 0 && (\n//                 <img src={room.imageurls[0]} className=\"big-img\" />\n//               )}\n//             </div>\n//             <div className=\"col-md-6\">\n//               <div style={{ textAlign: \"right\" }}>\n//                 <h1>Booking Details </h1>\n//                 <hr />\n//                 <b>\n//                   <p>Name :</p>\n                  \n//                   <p>From Date : {fromdate}</p>\n//                   <p>To Date : {todate}</p>\n//                   <p>Max Count : {room.maxcount}</p>\n//                 </b>\n//               </div>\n\n//               <div style={{ textAlign: \"right\" }}>\n//                 <b>\n//                   <h1>Amount </h1>\n//                   <hr />\n//                   <p>Total Days : {totaldays}</p>\n//                   <p>Rent per day : {room.rentperday}</p>\n//                   <p>Total Amount : {totalamount} </p>\n//                 </b>\n//               </div>\n\n//               <div style={{ float: \"right\" }}>\n//                 <button className=\"btn btn-primary\" onClick={bookRoom}>Pay Now </button>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       ) : (\n//         <Error /> // add error component\n//       )}\n//     </div>\n//   );\n// }\n\n// export default Bookingscreen;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}